<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Can Opener - ME 507: MotorDriver Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Can Opener - ME 507
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_motor_driver.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="class_motor_driver-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">MotorDriver Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A class which controls a servo motor.  
 <a href="class_motor_driver.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_motor_driver_8h_source.html">MotorDriver.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7fc74179cffb2ac8b6626c76d9b8247c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_motor_driver.html#a7fc74179cffb2ac8b6626c76d9b8247c">MotorDriver</a> (uint8_t new_id, uint32_t pos, uint32_t neg, uint32_t enable, uint8_t PWM_bound, uint16_t b_delay=0)</td></tr>
<tr class="memdesc:a7fc74179cffb2ac8b6626c76d9b8247c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for the <a class="el" href="class_motor_driver.html" title="A class which controls a servo motor.">MotorDriver</a> class.  <a href="class_motor_driver.html#a7fc74179cffb2ac8b6626c76d9b8247c">More...</a><br /></td></tr>
<tr class="separator:a7fc74179cffb2ac8b6626c76d9b8247c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dfc6cc86e5ba2587d4baf18efaf4dfd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_motor_driver.html#a3dfc6cc86e5ba2587d4baf18efaf4dfd">move</a> (float new_PWM)</td></tr>
<tr class="memdesc:a3dfc6cc86e5ba2587d4baf18efaf4dfd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets a new PWM value for the motor to be driven at.  <a href="class_motor_driver.html#a3dfc6cc86e5ba2587d4baf18efaf4dfd">More...</a><br /></td></tr>
<tr class="separator:a3dfc6cc86e5ba2587d4baf18efaf4dfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f8d0fc934bbcf337f9c82356dc5006c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_motor_driver.html#a0f8d0fc934bbcf337f9c82356dc5006c">brake</a> (void)</td></tr>
<tr class="memdesc:a0f8d0fc934bbcf337f9c82356dc5006c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Puts the motor into braking mode.  <a href="class_motor_driver.html#a0f8d0fc934bbcf337f9c82356dc5006c">More...</a><br /></td></tr>
<tr class="separator:a0f8d0fc934bbcf337f9c82356dc5006c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e081e99a925d0536b1bf81657b6053b"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_motor_driver.html#a4e081e99a925d0536b1bf81657b6053b">getPWM</a> (void)</td></tr>
<tr class="memdesc:a4e081e99a925d0536b1bf81657b6053b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the PWM value that the motor is currently being driven at.  <a href="class_motor_driver.html#a4e081e99a925d0536b1bf81657b6053b">More...</a><br /></td></tr>
<tr class="separator:a4e081e99a925d0536b1bf81657b6053b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31727da782c82bf3be7b130a6a62bcf8"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_motor_driver.html#a31727da782c82bf3be7b130a6a62bcf8">getID</a> (void)</td></tr>
<tr class="memdesc:a31727da782c82bf3be7b130a6a62bcf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the ID set in the constructor.  <a href="class_motor_driver.html#a31727da782c82bf3be7b130a6a62bcf8">More...</a><br /></td></tr>
<tr class="separator:a31727da782c82bf3be7b130a6a62bcf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63627d8664193cd480da0a085cb2f02d"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_motor_driver.html#a63627d8664193cd480da0a085cb2f02d">getDirection</a> (void)</td></tr>
<tr class="memdesc:a63627d8664193cd480da0a085cb2f02d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current direction the motor is spinning.  <a href="class_motor_driver.html#a63627d8664193cd480da0a085cb2f02d">More...</a><br /></td></tr>
<tr class="separator:a63627d8664193cd480da0a085cb2f02d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a74fcb8c07e08c7709777c17c8cd09692"><td class="memItemLeft" align="right" valign="top"><a id="a74fcb8c07e08c7709777c17c8cd09692"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>id</b></td></tr>
<tr class="separator:a74fcb8c07e08c7709777c17c8cd09692"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a495b49fe4fb144db3191373538d813ca"><td class="memItemLeft" align="right" valign="top"><a id="a495b49fe4fb144db3191373538d813ca"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>PWM</b></td></tr>
<tr class="separator:a495b49fe4fb144db3191373538d813ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4beea965ead9911829ed41b4273fd98"><td class="memItemLeft" align="right" valign="top"><a id="af4beea965ead9911829ed41b4273fd98"></a>
int8_t&#160;</td><td class="memItemRight" valign="bottom"><b>PWM_max</b></td></tr>
<tr class="separator:af4beea965ead9911829ed41b4273fd98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a987cabb8377ca2eeb3e298634eb239a1"><td class="memItemLeft" align="right" valign="top"><a id="a987cabb8377ca2eeb3e298634eb239a1"></a>
int8_t&#160;</td><td class="memItemRight" valign="bottom"><b>PWM_min</b></td></tr>
<tr class="separator:a987cabb8377ca2eeb3e298634eb239a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a58a60733a7122603a1bdfc119edc7b"><td class="memItemLeft" align="right" valign="top"><a id="a6a58a60733a7122603a1bdfc119edc7b"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>pinA</b></td></tr>
<tr class="separator:a6a58a60733a7122603a1bdfc119edc7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49502f5c2b95d3ec924544475598328c"><td class="memItemLeft" align="right" valign="top"><a id="a49502f5c2b95d3ec924544475598328c"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>pinB</b></td></tr>
<tr class="separator:a49502f5c2b95d3ec924544475598328c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76291b1bac083d3c76d093c511d82771"><td class="memItemLeft" align="right" valign="top"><a id="a76291b1bac083d3c76d093c511d82771"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>pinEN</b></td></tr>
<tr class="separator:a76291b1bac083d3c76d093c511d82771"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d3387c529c2d32526f7408ada4d6e03"><td class="memItemLeft" align="right" valign="top"><a id="a3d3387c529c2d32526f7408ada4d6e03"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>brake_delay</b></td></tr>
<tr class="separator:a3d3387c529c2d32526f7408ada4d6e03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac471c547adbf8a7f72426ccbaac15b97"><td class="memItemLeft" align="right" valign="top"><a id="ac471c547adbf8a7f72426ccbaac15b97"></a>
int8_t&#160;</td><td class="memItemRight" valign="bottom"><b>direction</b></td></tr>
<tr class="separator:ac471c547adbf8a7f72426ccbaac15b97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A class which controls a servo motor. </p>
<p>This class allows for PWM control of a servo motor. The motor must be a simple 2-wire servo motor. The class includes protections against quick reversal of the motor with a (blocking) brake delay. The class will also allow for a maximum PWM to be used. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a7fc74179cffb2ac8b6626c76d9b8247c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fc74179cffb2ac8b6626c76d9b8247c">&#9670;&nbsp;</a></span>MotorDriver()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MotorDriver::MotorDriver </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>new_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>neg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>enable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>PWM_bound</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>b_delay</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor for the <a class="el" href="class_motor_driver.html" title="A class which controls a servo motor.">MotorDriver</a> class. </p>
<p>This constructor sets various parameters for the <a class="el" href="class_motor_driver.html" title="A class which controls a servo motor.">MotorDriver</a> object. These include the pins the motor is connected to, the enable pin, the max/min PWM that can be sent to the motors, the braking delay, and an ID. Note that the braking delay at this point is blocking, so only short delays should be used, if at all. Another note - if the PWM bound is set to a number above 100, the bound will be set to 100.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_id</td><td>The ID of the motor, which has no effect on the function of the <a class="el" href="class_motor_driver.html" title="A class which controls a servo motor.">MotorDriver</a> object </td></tr>
    <tr><td class="paramname">pos</td><td>The pin name, i.e. PA0 or PC5, of the pin that is connected to the positive terminal of the motor. </td></tr>
    <tr><td class="paramname">neg</td><td>The pin name of the pin that is connected to the negative terminal of the motor </td></tr>
    <tr><td class="paramname">enable</td><td>The pin name of the pin that is connected to the enable pin on the physical motor driver chip </td></tr>
    <tr><td class="paramname">PWM_bound</td><td>The PWM value, from 0 to 100, that is the maximum PWM value that can be written to either the positive or negative pin </td></tr>
    <tr><td class="paramname">b_delay</td><td>The delay in ms, that the motor will break before switching the rotation direction of the motor - delay is blocking </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a0f8d0fc934bbcf337f9c82356dc5006c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f8d0fc934bbcf337f9c82356dc5006c">&#9670;&nbsp;</a></span>brake()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MotorDriver::brake </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Puts the motor into braking mode. </p>
<p>When this function is called, PWM_bound is sent to both the positive and negative poles of the motor. This is braking mode for many motor drivers, instead of coast mode, as MotorDriver::move(0) would cause </p>

</div>
</div>
<a id="a63627d8664193cd480da0a085cb2f02d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63627d8664193cd480da0a085cb2f02d">&#9670;&nbsp;</a></span>getDirection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t MotorDriver::getDirection </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current direction the motor is spinning. </p>
<p>If the motor is spinning forward, 1 is returned. If spinning backwards, -1 is returned. If the motor is stopped, 0 is returned.</p>
<dl class="section return"><dt>Returns</dt><dd>The direction of the motor, as specified above </dd></dl>

</div>
</div>
<a id="a31727da782c82bf3be7b130a6a62bcf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31727da782c82bf3be7b130a6a62bcf8">&#9670;&nbsp;</a></span>getID()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t MotorDriver::getID </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the ID set in the constructor. </p>
<dl class="section return"><dt>Returns</dt><dd>The ID of the <a class="el" href="class_motor_driver.html" title="A class which controls a servo motor.">MotorDriver</a> object </dd></dl>

</div>
</div>
<a id="a4e081e99a925d0536b1bf81657b6053b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e081e99a925d0536b1bf81657b6053b">&#9670;&nbsp;</a></span>getPWM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float MotorDriver::getPWM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the PWM value that the motor is currently being driven at. </p>
<dl class="section return"><dt>Returns</dt><dd>The current PWM value being sent to the motor </dd></dl>

</div>
</div>
<a id="a3dfc6cc86e5ba2587d4baf18efaf4dfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dfc6cc86e5ba2587d4baf18efaf4dfd">&#9670;&nbsp;</a></span>move()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MotorDriver::move </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>new_PWM</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets a new PWM value for the motor to be driven at. </p>
<p>This PWM value is allowed to be any number from -1*PWM_bound (from the constructor) to PWM_bound. If a PWM value is outside the bounds, the motor will be driven at the appropriate bound. A positive PWM is moving forward, negative moving backward. Note that these PWM values are the percentage. Calling <code>MotorDriver::move(1)</code> will rotate forward at 1% PWM, not 100%.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_PWM</td><td>The PWM that the motor will be driven at, from -1*PWMbound &lt;= new_PWM &lt;= PWM_bound </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>CanOpener/lib/<a class="el" href="_motor_driver_8h_source.html">MotorDriver.h</a></li>
<li>CanOpener/lib/<a class="el" href="_motor_driver_8cpp.html">MotorDriver.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_motor_driver.html">MotorDriver</a></li>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
